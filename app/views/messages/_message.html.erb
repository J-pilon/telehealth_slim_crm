<turbo-frame id="message_<%= message.id %>" class="flex <%= message.outgoing? ? 'justify-end' : 'justify-start' %>">
  <div class="max-w-xs lg:max-w-md px-4 py-2 rounded-lg <%= message.outgoing? ? 'bg-blue-500 text-white' : 'bg-gray-200 text-gray-900' %>">
    <div class="flex items-start space-x-2">
      <div class="flex-1">
        <p class="text-sm"><%= message.content %></p>
        <div class="flex justify-between items-center mt-1">
          <p class="text-xs <%= message.outgoing? ? 'text-blue-100' : 'text-gray-500' %>">
            <%= message.formatted_created_at %>
          </p>
          <div class="flex space-x-1">
            <%= link_to "View", patient_message_path(patient, message),
                data: { "turbo-frame": "message_#{message.id}" },
                class: "text-xs #{message.outgoing? ? 'text-blue-100 hover:text-white' : 'text-gray-500 hover:text-gray-700'}" %>
            <% if policy(message).update? %>
              <%= link_to "Edit", edit_patient_message_path(patient, message),
                  data: { "turbo-frame": "message_#{message.id}" },
                  class: "text-xs #{message.outgoing? ? 'text-blue-100 hover:text-white' : 'text-gray-500 hover:text-gray-700'}" %>
            <% end %>
            <% if policy(message).destroy? %>
              <%= button_to "Delete", patient_message_path(patient, message),
                  method: :delete,
                  form: { data: { turbo_confirm: 'Are you sure?' }, class: "inline" },
                  class: "text-xs #{message.outgoing? ? 'text-blue-100 hover:text-white' : 'text-gray-500 hover:text-gray-700'}" %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
</turbo-frame>
